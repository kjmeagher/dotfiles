#!/bin/sh

cvmfs="${1}"
shift
args="${@}"

if [ ! -z "${SROOT}" ]; then
	echo "SROOT already set!"
	exit -1
fi

if [ -z "${cvmfs}" ]; then
	cvmfs='4.3.0'
fi

export SHELL=${HOME}/.kjm/bin/fish

setup_file="/cvmfs/icecube.opensciencegrid.org/py3-v${cvmfs}/setup.sh"
if [ -e "${setup_file}" ]; then
	eval $(${setup_file})
	unset PYTHONPATH
	if [ -z "${args}" ]; then
		$SHELL -i
	else
		echo "running ${args}"
		$SHELL -ic "${args}"
	fi
else
	echo "${setup_file} not found!"
fi


